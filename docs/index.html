<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Day‑Ahead Energy Prices – Nordics & EU | Utilitarian Spot</title>
    <meta name="description"
        content="Free, stable energy price backend for load and power control. Machine‑readable JSON endpoints for day‑ahead prices across Nordics & EU, built for automation and demand response." />
    <meta name="keywords"
        content="energy price backend, load control, power control, demand response, home automation, machine-readable JSON, day-ahead prices API, ENTSO-E, Nord Pool, integrations, SE1, SE2, SE3, SE4, DK1, DK2, NO1, NO2, NO3, NO4, NO5, FI, DE_LU, AT, FR, BE, NL, PL, EE, LT, LV, IT-NORTH, IT-CENTRE_NORTH, IT-CENTRE_SOUTH, IT-SOUTH, IT-SICILY, IT-SARDINIA, IT-CALABRIA, CH, ES, PT, SK, SI, CZ, HU, HR, RO, RS, BG, GR" />
    <meta property="og:title" content="Day‑Ahead Energy Prices – Nordics & EU | Utilitarian Spot" />
    <meta property="og:description"
        content="Free, stable energy price backend for load and power control. JSON endpoints for day‑ahead prices across Nordics & EU; charts included as a convenience." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://spot.utilitarian.io" />
    <meta property="og:site_name" content="Utilitarian Spot" />
    <meta property="og:image" content="https://spot.utilitarian.io/assets/images/social-card-index.png" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt"
        content="Stylized electricity price chart over a dark background with Utilitarian Spot branding." />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Day‑Ahead Energy Prices – Nordics & EU | Utilitarian Spot" />
    <meta name="twitter:description"
        content="Free, stable energy price backend with machine‑readable JSON for EU & Nordic day‑ahead markets." />
    <meta name="twitter:image" content="https://spot.utilitarian.io/assets/images/social-card-index.png" />
    <meta name="twitter:image:alt"
        content="Stylized electricity price chart over a dark background with Utilitarian Spot branding." />

    <link rel="icon" type="image/png" href="/assets/favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/assets/favicon/favicon.svg" />
    <link rel="shortcut icon" href="/assets/favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="Spot" />
    <link rel="manifest" href="/assets/favicon/site.webmanifest" />
    <meta name="theme-color" content="#0f172a" />
    <style>
        [x-cloak] {
            display: none !important;
        }
    </style>

    <link rel="preconnect" href="https://cdn.tailwindcss.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>

    <script src="https://cdn.tailwindcss.com"></script>

    <!-- uPlot -->
    <link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/uplot@1.6.24/dist/uPlot.min.css"
        onload="this.onload=null;this.rel='stylesheet'" />
    <noscript>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uplot@1.6.24/dist/uPlot.min.css" />
    </noscript>
    <script defer src="https://cdn.jsdelivr.net/npm/uplot@1.6.24/dist/uPlot.iife.js"></script>
    <!-- Alpine Persist plugin (load before Alpine) -->
    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/persist@3.x.x/dist/cdn.min.js"></script>
    <!-- Alpine.js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <!-- highlight.js -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"
        as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
    </noscript>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script defer src="/assets/spot-notify.js"></script>

    <!--
    TODO:s
    When updating the page the country is not persisted correctly.
    Choosing UTC does not give UTC timestamps in the graphs.
    
    -->
    <script>
        window.SPOT_COUNTRIES = window.SPOT_COUNTRIES || [
            { code: 'SE', name: 'Sweden', zones: ['SE1', 'SE2', 'SE3', 'SE4'] },
            { code: 'DK', name: 'Denmark', zones: ['DK1', 'DK2'] },
            { code: 'NO', name: 'Norway', zones: ['NO1', 'NO2', 'NO3', 'NO4', 'NO5'] },
            { code: 'FI', name: 'Finland', zones: ['FI'] },
            { code: 'DE', name: 'Germany', zones: ['DE_LU'] },
            { code: 'AT', name: 'Austria', zones: ['AT'] },
            { code: 'FR', name: 'France', zones: ['FR'] },
            { code: 'BE', name: 'Belgium', zones: ['BE'] },
            { code: 'NL', name: 'Netherlands', zones: ['NL'] },
            { code: 'PL', name: 'Poland', zones: ['PL'] },
            { code: 'EE', name: 'Estonia', zones: ['EE'] },
            { code: 'LT', name: 'Lithuania', zones: ['LT'] },
            { code: 'LV', name: 'Latvia', zones: ['LV'] },
            { code: 'IT', name: 'Italy', zones: ['IT-NORTH', 'IT-CENTRE_NORTH', 'IT-CENTRE_SOUTH', 'IT-SOUTH', 'IT-SICILY', 'IT-SARDINIA', 'IT-CALABRIA'] },
            { code: 'CH', name: 'Switzerland', zones: ['CH'] },
            { code: 'ES', name: 'Spain', zones: ['ES'] },
            { code: 'PT', name: 'Portugal', zones: ['PT'] },
            { code: 'SK', name: 'Slovakia', zones: ['SK'] },
            { code: 'SI', name: 'Slovenia', zones: ['SI'] },
            { code: 'CZ', name: 'Czech Republic', zones: ['CZ'] },
            { code: 'HU', name: 'Hungary', zones: ['HU'] },
            { code: 'HR', name: 'Croatia', zones: ['HR'] },
            { code: 'RO', name: 'Romania', zones: ['RO'] },
            { code: 'RS', name: 'Serbia', zones: ['RS'] },
            { code: 'BG', name: 'Bulgaria', zones: ['BG'] },
            { code: 'GR', name: 'Greece', zones: ['GR'] },
        ];

        document.addEventListener('alpine:init', () => {
            if (window.persist && typeof Alpine.$persist !== 'function') {
                Alpine.plugin(window.persist);
            }

            const countries = window.SPOT_COUNTRIES || [];
            const countryMap = new Map();
            const zoneCountryMap = new Map();
            const zoneOptions = [];
            const buildZoneLabel = (zone, countryName) => `${zone} · ${countryName}`;

            countries.forEach(country => {
                countryMap.set(country.code, country);
                const zones = Array.isArray(country.zones) ? country.zones : [];
                zones.forEach(zone => {
                    zoneCountryMap.set(zone, country.code);
                    zoneOptions.push({
                        code: zone,
                        country: country.code,
                        label: buildZoneLabel(zone, country.name)
                    });
                });
            });

            const findCountryByCode = code => countryMap.get(code) || null;
            const findCountryByZone = zone => {
                const code = zoneCountryMap.get(zone);
                return code ? findCountryByCode(code) : null;
            };

            const buildTimezoneList = () => {

                return [
                    'UTC',
                    'Europe/Stockholm',
                    'Europe/Oslo',
                    'Europe/Copenhagen',
                    'Europe/Helsinki',
                    'Europe/Berlin',
                    'Europe/Paris',
                    'Europe/Brussels',
                    'Europe/Vienna',
                    'Europe/Rome',
                    'Europe/Madrid',
                    'Europe/Lisbon',
                    'Europe/Warsaw',
                    'Europe/Prague',
                    'Europe/Budapest',
                    'Europe/Zagreb',
                    'Europe/Bucharest',
                    'Europe/Sofia',
                    'Europe/Athens'
                ];
            };

            const inferCountry = () => {
                const locale = (navigator.language || navigator.userLanguage || '').toUpperCase();
                const match = countries.find(c => locale.includes(c.code));
                return match ? match.code : 'SE';
            };

            const inferTimezone = () => {
                try {
                    return Intl.DateTimeFormat().resolvedOptions().timeZone || 'UTC';
                } catch (_) {
                    return 'UTC';
                }
            };

            const timezoneList = buildTimezoneList();
            const defaultCountry = inferCountry();
            const defaultTimezone = inferTimezone();
            if (defaultTimezone && !timezoneList.includes(defaultTimezone)) {
                timezoneList.unshift(defaultTimezone);
            }

            const decodeStoredValue = raw => {
                if (raw == null || raw === '') return null;
                try {
                    return JSON.parse(raw);
                } catch (_) {
                    return raw;
                }
            };

            const readStoredValue = (key, legacyKeys = []) => {
                const read = candidate => {
                    try {
                        return decodeStoredValue(localStorage.getItem(candidate));
                    } catch (_) {
                        return null;
                    }
                };
                const primary = read(key);
                if (primary !== null && primary !== undefined && primary !== '') return primary;
                for (const legacy of legacyKeys) {
                    const legacyValue = read(legacy);
                    if (legacyValue !== null && legacyValue !== undefined && legacyValue !== '') {
                        return legacyValue;
                    }
                }
                return null;
            };

            const writeStoredValue = (key, value, legacyKeys = []) => {
                try {
                    if (value === null || value === undefined || value === '') {
                        localStorage.removeItem(key);
                        legacyKeys.forEach(candidate => localStorage.removeItem(candidate));
                    } else {
                        localStorage.setItem(key, JSON.stringify(value));
                        legacyKeys.forEach(candidate => localStorage.removeItem(candidate));
                    }
                } catch (_) {
                    // ignore storage failures (private browsing, etc.)
                }
            };

            const STORAGE_KEYS = {
                country: 'spot.settings.country',
                zone: 'spot.settings.zone',
                timezone: 'spot.settings.timezone',
                notificationZone: 'spot.notifications.zone'
            };

            const LEGACY_KEYS = {
                country: 'spot.country',
                zone: 'spot.zone',
                timezone: 'spot.timezone'
            };

            const storedCountry = readStoredValue(STORAGE_KEYS.country, [LEGACY_KEYS.country]);
            const storedZone = readStoredValue(STORAGE_KEYS.zone, [LEGACY_KEYS.zone]);
            const storedTimezone = readStoredValue(STORAGE_KEYS.timezone, [LEGACY_KEYS.timezone]);
            const storedNotificationZone = readStoredValue(STORAGE_KEYS.notificationZone, []);

            let initialCountry = (typeof storedCountry === 'string' && storedCountry) ? storedCountry : defaultCountry;
            const initialTimezone = (typeof storedTimezone === 'string' && storedTimezone) ? storedTimezone : defaultTimezone;
            let initialZone = (typeof storedZone === 'string' && storedZone) ? storedZone : null;
            let initialNotificationZone = (typeof storedNotificationZone === 'string' && storedNotificationZone) ? storedNotificationZone : null;
            const countryExists = code => countryMap.has(code);
            if (!countryExists(initialCountry)) {
                initialCountry = defaultCountry;
            }
            if (initialZone && !zoneCountryMap.has(initialZone)) {
                initialZone = null;
            }
            if (initialNotificationZone && !zoneCountryMap.has(initialNotificationZone)) {
                initialNotificationZone = null;
            }
            if (!initialNotificationZone) {
                initialNotificationZone = initialZone || (zoneOptions[0]?.code || null);
            }

            window.SPOT_STORAGE = {
                readStoredValue,
                writeStoredValue,
                STORAGE_KEYS,
                LEGACY_KEYS,
                zoneOwners: Object.fromEntries(zoneCountryMap),
                zoneOptions: zoneOptions.map(opt => ({ ...opt })),
                notificationZone: initialNotificationZone
            };

            Alpine.data('spotSettingsFlyout', () => ({
                open: false,
                suppressEmit: false,
                countries,
                timezoneList,
                zoneOptions,
                selectedCountry: initialCountry,
                selectedZone: initialZone,
                selectedTimezone: initialTimezone,
                notificationZone: initialNotificationZone,
                get currentCountry() {
                    return findCountryByCode(this.selectedCountry);
                },
                get countryLabel() {
                    const country = this.currentCountry;
                    return country ? `${country.name} (${country.code})` : 'Choose a country';
                },
                get zoneLabel() {
                    if (!this.selectedZone) return 'Choose a zone';
                    const option = this.zoneOptions.find(o => o.code === this.selectedZone);
                    if (option) {
                        if (option.label) return option.label;
                        const owner = findCountryByZone(option.code);
                        return owner ? buildZoneLabel(option.code, owner.name) : option.code;
                    }
                    return 'Choose a zone';
                },
                formatTimezone(tz) {
                    if (!tz) return '';
                    const parts = tz.split('/');
                    const name = parts.pop()?.replace(/_/g, ' ') || tz;
                    const region = parts.length ? parts[0].replace(/_/g, ' ') : '';
                    return region && region.toUpperCase() !== 'UTC' ? `${name} (${region})` : name;
                },
                setOpen(value) {
                    if (this.open === value) return;
                    this.open = value;
                    window.dispatchEvent(new CustomEvent(value ? 'spot-settings-opened' : 'spot-settings-closed'));
                },
                openPanel() {
                    this.setOpen(true);
                },
                closePanel() {
                    this.setOpen(false);
                },
                persistSelection() {
                    writeStoredValue(STORAGE_KEYS.country, this.selectedCountry, [LEGACY_KEYS.country]);
                    const zoneValue = zoneCountryMap.has(this.selectedZone) ? this.selectedZone : null;
                    writeStoredValue(STORAGE_KEYS.zone, zoneValue, [LEGACY_KEYS.zone]);
                },
                persistTimezone() {
                    writeStoredValue(STORAGE_KEYS.timezone, this.selectedTimezone, [LEGACY_KEYS.timezone]);
                },
                persistNotification() {
                    if (this.notificationZone && zoneCountryMap.has(this.notificationZone)) {
                        writeStoredValue(STORAGE_KEYS.notificationZone, this.notificationZone, []);
                    } else {
                        writeStoredValue(STORAGE_KEYS.notificationZone, null, []);
                    }
                },
                emitSelection(reason) {
                    if (this.suppressEmit) return;
                    document.dispatchEvent(new CustomEvent('spot:selection-change', {
                        detail: {
                            country: this.selectedCountry,
                            zone: this.selectedZone,
                            timezone: this.selectedTimezone,
                            reason,
                            source: 'alpine'
                        }
                    }));
                },
                emitTimezone(reason) {
                    if (this.suppressEmit) return;
                    document.dispatchEvent(new CustomEvent('spot:timezone-change', {
                        detail: {
                            timezone: this.selectedTimezone,
                            reason,
                            source: 'alpine'
                        }
                    }));
                },
                emitNotification(reason) {
                    if (this.suppressEmit) return;
                    const zones = this.notificationZone ? [this.notificationZone] : [];
                    document.dispatchEvent(new CustomEvent('spot:notification-zone-change', {
                        detail: {
                            zones,
                            primary: this.notificationZone || null,
                            reason,
                            source: 'alpine'
                        }
                    }));
                },
                chooseCountry(code) {
                    if (!countryExists(code)) return;
                    if (this.selectedCountry === code) {
                        return;
                    }
                    this.selectedCountry = code;
                },
                applyExternalSelection(detail = {}) {
                    this.suppressEmit = true;
                    if (detail.country && countryExists(detail.country)) {
                        this.selectedCountry = detail.country;
                    }
                    if (detail.zone !== undefined) {
                        if (detail.zone === null) {
                            this.selectedZone = null;
                        } else if (zoneCountryMap.has(detail.zone)) {
                            this.selectedZone = detail.zone;
                        }
                    }
                    if (detail.timezone) {
                        this.selectedTimezone = detail.timezone;
                        if (!this.timezoneList.includes(detail.timezone)) {
                            this.timezoneList.unshift(detail.timezone);
                        }
                    }
                    this.ensureValidSelections();
                    this.suppressEmit = false;
                    this.persistSelection();
                    this.persistTimezone();
                    this.persistNotification();
                    this.emitNotification('external-sync');
                },
                ensureValidSelections() {
                    if (!countryExists(this.selectedCountry)) {
                        this.selectedCountry = defaultCountry;
                    }
                    const currentZones = findCountryByCode(this.selectedCountry)?.zones || [];
                    if (this.selectedZone && !zoneCountryMap.has(this.selectedZone)) {
                        this.selectedZone = null;
                    }
                    const owner = this.selectedZone ? zoneCountryMap.get(this.selectedZone) : null;
                    if (!owner || owner !== this.selectedCountry) {
                        this.selectedZone = currentZones.length ? currentZones[0] : null;
                    }
                    if (!this.selectedZone && currentZones.length === 0 && this.zoneOptions.length) {
                        this.selectedZone = this.zoneOptions[0].code;
                    }
                    if (this.selectedTimezone) {
                        if (!this.timezoneList.includes(this.selectedTimezone)) {
                            this.timezoneList.unshift(this.selectedTimezone);
                        }
                    } else {
                        this.selectedTimezone = defaultTimezone;
                    }
                    if (this.notificationZone && !zoneCountryMap.has(this.notificationZone)) {
                        this.notificationZone = null;
                    }
                    if (!this.notificationZone && this.zoneOptions.length) {
                        this.notificationZone = this.zoneOptions[0].code;
                    }
                },
                init() {
                    this.suppressEmit = true;
                    this.ensureValidSelections();
                    this.persistSelection();
                    this.persistTimezone();
                    this.persistNotification();
                    this.suppressEmit = false;

                    window.spotSettingsPanel = {
                        open: () => this.setOpen(true),
                        close: () => this.setOpen(false)
                    };

                    window.addEventListener('spot:open-settings', () => this.setOpen(true));
                    window.addEventListener('spot:close-settings', () => this.setOpen(false));

                    document.addEventListener('spot:selection-change', event => {
                        const detail = event.detail || {};
                        if (detail.source === 'alpine') return;
                        this.applyExternalSelection(detail);
                    });

                    document.addEventListener('spot:timezone-change', event => {
                        const detail = event.detail || {};
                        if (detail.source === 'alpine') return;
                        if (detail.timezone) {
                            this.suppressEmit = true;
                            this.selectedTimezone = detail.timezone;
                            this.persistTimezone();
                            this.suppressEmit = false;
                        }
                    });

                    this.$watch('selectedCountry', (newCountry) => {
                        if (this.suppressEmit) return;
                        if (!countryExists(newCountry)) {
                            this.selectedCountry = defaultCountry;
                            return;
                        }
                        const zones = findCountryByCode(newCountry)?.zones || [];
                        if (zones.length === 0) {
                            if (this.selectedZone !== null) {
                                this.selectedZone = null;
                                return;
                            }
                        } else if (!zones.includes(this.selectedZone)) {
                            this.selectedZone = zones[0];
                            return;
                        }
                        this.persistSelection();
                        this.emitSelection('country');
                    });
                    this.$watch('selectedZone', (newZone) => {
                        if (this.suppressEmit) return;
                        if (newZone && !zoneCountryMap.has(newZone)) {
                            this.selectedZone = null;
                            return;
                        }
                        if (newZone) {
                            const owner = zoneCountryMap.get(newZone);
                            if (owner && owner !== this.selectedCountry) {
                                const zones = findCountryByCode(this.selectedCountry)?.zones || [];
                                this.selectedZone = zones.length ? zones[0] : null;
                                return;
                            }
                        } else {
                            const zones = findCountryByCode(this.selectedCountry)?.zones || [];
                            if (zones.length) {
                                this.selectedZone = zones[0];
                                return;
                            }
                        }
                        this.persistSelection();
                        this.emitSelection('zone');
                    });
                    this.$watch('selectedTimezone', () => {
                        if (this.suppressEmit) return;
                        this.persistTimezone();
                        this.emitTimezone('timezone');
                    });
                    this.$watch('notificationZone', () => {
                        if (this.suppressEmit) return;
                        if (this.notificationZone && !zoneCountryMap.has(this.notificationZone)) {
                            this.notificationZone = null;
                            return;
                        }
                        this.persistNotification();
                        this.emitNotification('notify-zone');
                    });

                    this.emitSelection('init');
                    this.emitTimezone('init');
                    this.emitNotification('init');
                }
            }));
        });

    </script>
</head>

<body x-data="spotSettingsFlyout()" x-init="init()">
    <header
        class="bg-slate-900/95 text-slate-100 backdrop-blur border-t border-white/10 fixed inset-x-0 bottom-0 z-40 sm:bg-white/90 sm:text-slate-600 sm:sticky sm:top-0 sm:bottom-auto sm:border-b sm:border-t-0 sm:border-slate-200">
        <nav
            class="mx-auto flex w-full max-w-6xl items-center gap-4 px-4 py-3 text-sm font-semibold text-slate-100 sm:text-slate-600">
            <a href="/"
                class="hidden sm:flex items-baseline shrink-0 font-display text-2xl font-semibold tracking-tight text-slate-900">
                <span class="mr-2">Utilitarian</span>
                <span class="relative whitespace-nowrap text-green-600">
                    <svg aria-hidden="true" viewBox="0 0 418 42"
                        class="absolute top-2/3 left-0 h-[0.6em] w-full fill-green-300/70" preserveAspectRatio="none">
                        <path
                            d="M203.371.916c-26.013-2.078-76.686 1.963-124.73 9.946L67.3 12.749C35.421 18.062 18.2 21.766 6.004 25.934 1.244 27.561.828 27.778.874 28.61c.07 1.214.828 1.121 9.595-1.176 9.072-2.377 17.15-3.92 39.246-7.496C123.565 7.986 157.869 4.492 195.942 5.046c7.461.108 19.25 1.696 19.17 2.582-.107 1.183-7.874 4.31-25.75 10.366-21.992 7.45-35.43 12.534-36.701 13.884-2.173 2.308-.202 4.407 4.442 4.734 2.654.187 3.263.157 15.593-.78 35.401-2.686 57.944-3.488 88.365-3.143 46.327.526 75.721 2.23 130.788 7.584 19.787 1.924 20.814 1.98 24.557 1.332l.066-.011c1.201-.203 1.53-1.825.399-2.335-2.911-1.31-4.893-1.604-22.048-3.261-57.509-5.556-87.871-7.36-132.059-7.842-23.239-.254-33.617-.116-50.627.674-11.629.54-42.371 2.494-46.696 2.967-2.359.259 8.133-3.625 26.504-9.81 23.239-7.825 27.934-10.149 28.304-14.005.417-4.348-3.529-6-16.878-7.066Z">
                        </path>
                    </svg>
                    <span class="relative">Spot</span>
                </span>
            </a>
            <div class="flex flex-1 items-center justify-around gap-4 sm:justify-center sm:gap-6">
                <a href="/" class="text-white hover:text-white sm:text-slate-900 sm:hover:text-slate-900">Latest
                    Prices</a>
                <a href="/explorer/"
                    class="text-slate-200 hover:text-white sm:text-slate-600 sm:hover:text-slate-900">Historical
                    Explorer</a>
                <a href="/developer/"
                    class="text-slate-200 hover:text-white sm:text-slate-600 sm:hover:text-slate-900">Developer</a>
            </div>
            <button id="spot-settings-button-desktop" type="button"
                class="hidden lg:inline-flex items-center justify-center rounded-full border border-slate-200 bg-white p-2 text-slate-500 transition hover:text-slate-900 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500 lg:ml-auto"
                aria-label="Open notification settings" title="Notification settings" @click="openPanel()">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor" class="h-5 w-5">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 0 1 1.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.559.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.894.149c-.424.07-.764.383-.929.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 0 1-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.398.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 0 1-.12-1.45l.527-.737c.25-.35.272-.806.108-1.204-.165-.397-.506-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.108-1.204l-.526-.738a1.125 1.125 0 0 1 .12-1.45l.773-.773a1.125 1.125 0 0 1 1.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894Z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                </svg>
            </button>
        </nav>
    </header>
    <button id="spot-settings-button-mobile" type="button"
        class="fixed top-4 right-4 z-40 inline-flex h-10 w-10 items-center justify-center rounded-full border border-slate-200 bg-white text-slate-600 shadow-lg transition hover:text-slate-900 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500 lg:hidden"
        aria-label="Open notification settings" title="Notification settings" @click="openPanel()">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
            class="h-5 w-5">
            <path stroke-linecap="round" stroke-linejoin="round"
                d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 0 1 1.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.559.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.894.149c-.424.07-.764.383-.929.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 0 1-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.398.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 0 1-.12-1.45l.527-.737c.25-.35.272-.806.108-1.204-.165-.397-.506-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.108-1.204l-.526-.738a1.125 1.125 0 0 1 .12-1.45l.773-.773a1.125 1.125 0 0 1 1.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894Z" />
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
        </svg>
    </button>
    <div class="sm:hidden bg-white/95 backdrop-blur border-b border-slate-200">
        <a href="/" class="mx-auto flex w-full max-w-6xl items-baseline justify-center gap-2 px-4 py-3 font-display text-lg font-semibold text-slate-900">
            <span>Utilitarian</span>
            <span class="relative whitespace-nowrap text-green-600">
                <svg aria-hidden="true" viewBox="0 0 418 42"
                    class="absolute top-2/3 left-0 h-[0.5em] w-full fill-green-300/70" preserveAspectRatio="none">
                    <path
                        d="M203.371.916c-26.013-2.078-76.686 1.963-124.73 9.946L67.3 12.749C35.421 18.062 18.2 21.766 6.004 25.934 1.244 27.561.828 27.778.874 28.61c.07 1.214.828 1.121 9.595-1.176 9.072-2.377 17.15-3.92 39.246-7.496C123.565 7.986 157.869 4.492 195.942 5.046c7.461.108 19.25 1.696 19.17 2.582-.107 1.183-7.874 4.31-25.75 10.366-21.992 7.45-35.43 12.534-36.701 13.884-2.173 2.308-.202 4.407 4.442 4.734 2.654.187 3.263.157 15.593-.78 35.401-2.686 57.944-3.488 88.365-3.143 46.327.526 75.721 2.23 130.788 7.584 19.787 1.924 20.814 1.98 24.557 1.332l.066-.011c1.201-.203 1.53-1.825.399-2.335-2.911-1.31-4.893-1.604-22.048-3.261-57.509-5.556-87.871-7.36-132.059-7.842-23.239-.254-33.617-.116-50.627.674-11.629.54-42.371 2.494-46.696 2.967-2.359.259 8.133-3.625 26.504-9.81 23.239-7.825 27.934-10.149 28.304-14.005.417-4.348-3.529-6-16.878-7.066Z">
                    </path>
                </svg>
                <span class="relative">Spot</span>
            </span>
        </a>
    </div>
    <main class="pb-20 sm:pb-0">
        <div class="hidden md:block mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pt-10 text-center lg:pt-16">
            <h1
                class="mx-auto max-w-4xl font-display text-3xl font-bold tracking-tight text-slate-900 lg:text-5xl xl:text-7xl">
                Day-ahead energy prices across the EU
            </h1>
            <p class="mx-auto mt-6 max-w-2xl text-lg tracking-tight text-slate-700">
                Access historical and day ahead prices of energy across the EU. Simple, fast and free. Build your own
                dashboards or apps on top of the same data—no billing, no rate limits.
            </p>

        </div>

        <div class="mx-auto max-w-5xl px-2 sm:px-4 lg:px-8 py-4 sm:py-6" x-data="priceExplorer()" x-init="init()">


            <div class="relative my-8">
                <div id="priceChartAll" class="w-full h-64 sm:h-80 lg:h-96 mb-8"></div>
                <button id="spot-country-display" type="button"
                    class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/4 inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white/95 px-4 py-2 text-sm font-semibold text-slate-900 shadow-md backdrop-blur hover:bg-white focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500 touch-manipulation"
                    aria-label="Choose country and zone" @click="openPanel()" x-text="countryLabel">
                </button>
            </div>
        </div>

        <!--
        <div id="spot-dev-panel" class="hidden mx-auto mt-6 max-w-3xl px-4 sm:px-6 lg:px-8">
            <div class="rounded-xl border border-slate-300 bg-slate-900 p-6 text-slate-100 shadow-lg">
                <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
                    <h3 class="text-lg font-semibold text-slate-100">Notification Dev Harness</h3>
                    <p class="text-xs text-slate-300">Local-only panel for testing badge + notification flows.</p>
                </div>
                <div class="mt-4 flex flex-wrap gap-3">
                    <button id="dev-request-permission" type="button"
                        class="rounded-md bg-slate-100 px-4 py-2 text-sm font-semibold text-slate-900 hover:bg-white">
                        Request Notification Permission
                    </button>
                    <button id="dev-force-notify" type="button"
                        class="rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400">
                        Force Notification (Dev)
                    </button>
                    <button id="dev-clear-badge" type="button"
                        class="rounded-md bg-slate-700 px-4 py-2 text-sm font-semibold text-white hover:bg-slate-600">
                        Clear Badge
                    </button>
                </div>
                <div class="mt-4 flex flex-wrap items-center gap-2 text-xs sm:text-sm">
                    <label for="dev-data-origin" class="text-slate-300">Data source</label>
                    <select id="dev-data-origin"
                        class="rounded-md border border-slate-600 bg-slate-800 px-3 py-2 text-slate-100 focus:outline-none focus:ring focus:ring-slate-500">
                        <option value="remote">Remote (spot.utilitarian.io)</option>
                        <option value="local">Local (served files)</option>
                        <option value="custom">Custom…</option>
                    </select>
                </div>
                <div id="dev-data-origin-custom-wrap" class="mt-2 hidden w-full">
                    <label for="dev-data-origin-custom"
                        class="text-xs uppercase tracking-wide text-slate-400 block mb-1">Custom
                        origin (https://…)</label>
                    <input id="dev-data-origin-custom" type="text" inputmode="url"
                        class="w-full rounded-md border border-slate-600 bg-slate-800 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:outline-none focus:ring focus:ring-slate-500"
                        placeholder="https://your-ngrok-subdomain.ngrok.app" autocomplete="off" spellcheck="false" />
                </div>
                <dl class="mt-4 grid grid-cols-1 gap-4 text-sm sm:grid-cols-2 lg:grid-cols-3">
                    <div>
                        <dt class="text-xs uppercase tracking-wide text-slate-400">Zone</dt>
                        <dd id="dev-state-zone" class="mt-1 text-base font-semibold text-white">—</dd>
                    </div>
                    <div>
                        <dt class="text-xs uppercase tracking-wide text-slate-400">Last Timestamp</dt>
                        <dd id="dev-state-timestamp" class="mt-1 text-base font-semibold text-white">—</dd>
                    </div>
                    <div>
                        <dt class="text-xs uppercase tracking-wide text-slate-400">Data Source</dt>
                        <dd id="dev-state-origin" class="mt-1 text-base font-semibold text-white">—</dd>
                    </div>
                </dl>
                <p id="dev-status" class="mt-4 text-xs text-slate-300"></p>
            </div>
        </div>
      
        <
        <div class="mx-auto max-w-6xl mt-16 text-center">
            <a href="/developer/"
                class="inline-flex items-center justify-center rounded-full py-3 px-6 text-sm font-semibold border border-slate-300 text-slate-800 hover:bg-slate-100">
                Developer documentation →
            </a>
        </div>
          -->

        <!-- Available Zones -->
        <div class="mx-auto p-4 max-w-5xl border-slate-200/60">
            <div class="bg-white rounded-xl shadow-md border border-slate-200">
                <div class="px-6 py-4 border-b border-slate-100">
                    <h4 class="font-semibold text-slate-900">Available Zones</h4>
                    <p class="text-sm text-slate-600">Each endpoint uses the zone codes below.</p>
                </div>
                <div class="px-6 py-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm">
                    <div>
                        <h5 class="font-medium text-slate-700 mb-2">Nordics</h5>
                        <div class="space-y-1 text-slate-700">
                            <button type="button"
                                class="block w-full text-left rounded-md border border-transparent px-3 py-2 transition focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500"
                                :class="selectedCountry === 'SE' ? 'border-slate-300 bg-slate-100 text-slate-900 shadow-sm' : 'hover:border-slate-200 hover:bg-slate-50'"
                                @click="chooseCountry('SE')" :aria-pressed="selectedCountry === 'SE'">
                                <span>🇸🇪 <strong>Sweden:</strong> SE1, SE2, SE3, SE4</span>
                            </button>
                            <button type="button"
                                class="block w-full text-left rounded-md border border-transparent px-3 py-2 transition focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500"
                                :class="selectedCountry === 'DK' ? 'border-slate-300 bg-slate-100 text-slate-900 shadow-sm' : 'hover:border-slate-200 hover:bg-slate-50'"
                                @click="chooseCountry('DK')" :aria-pressed="selectedCountry === 'DK'">
                                <span>🇩🇰 <strong>Denmark:</strong> DK1, DK2</span>
                            </button>
                            <button type="button"
                                class="block w-full text-left rounded-md border border-transparent px-3 py-2 transition focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500"
                                :class="selectedCountry === 'NO' ? 'border-slate-300 bg-slate-100 text-slate-900 shadow-sm' : 'hover:border-slate-200 hover:bg-slate-50'"
                                @click="chooseCountry('NO')" :aria-pressed="selectedCountry === 'NO'">
                                <span>🇳🇴 <strong>Norway:</strong> NO1, NO2, NO3, NO4, NO5</span>
                            </button>
                            <button type="button"
                                class="block w-full text-left rounded-md border border-transparent px-3 py-2 transition focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500"
                                :class="selectedCountry === 'FI' ? 'border-slate-300 bg-slate-100 text-slate-900 shadow-sm' : 'hover:border-slate-200 hover:bg-slate-50'"
                                @click="chooseCountry('FI')" :aria-pressed="selectedCountry === 'FI'">
                                <span>🇫🇮 <strong>Finland:</strong> FI</span>
                            </button>
                        </div>
                    </div>
                    <div>
                        <h5 class="font-medium text-slate-700 mb-2">Central Europe</h5>
                        <div class="space-y-1 text-slate-700">
                            <button type="button"
                                class="block w-full text-left rounded-md border border-transparent px-3 py-2 transition focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500"
                                :class="selectedCountry === 'DE' ? 'border-slate-300 bg-slate-100 text-slate-900 shadow-sm' : 'hover:border-slate-200 hover:bg-slate-50'"
                                @click="chooseCountry('DE')" :aria-pressed="selectedCountry === 'DE'">
                                <span>🇩🇪 <strong>Germany:</strong> DE_LU</span>
                            </button>
                            <button type="button"
                                class="block w-full text-left rounded-md border border-transparent px-3 py-2 transition focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500"
                                :class="selectedCountry === 'AT' ? 'border-slate-300 bg-slate-100 text-slate-900 shadow-sm' : 'hover:border-slate-200 hover:bg-slate-50'"
                                @click="chooseCountry('AT')" :aria-pressed="selectedCountry === 'AT'">
                                <span>🇦🇹 <strong>Austria:</strong> AT</span>
                            </button>
                            <button type="button"
                                class="block w-full text-left rounded-md border border-transparent px-3 py-2 transition focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500"
                                :class="selectedCountry === 'FR' ? 'border-slate-300 bg-slate-100 text-slate-900 shadow-sm' : 'hover:border-slate-200 hover:bg-slate-50'"
                                @click="chooseCountry('FR')" :aria-pressed="selectedCountry === 'FR'">
                                <span>🇫🇷 <strong>France:</strong> FR</span>
                            </button>
                            <button type="button"
                                class="block w-full text-left rounded-md border border-transparent px-3 py-2 transition focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500"
                                :class="selectedCountry === 'BE' ? 'border-slate-300 bg-slate-100 text-slate-900 shadow-sm' : 'hover:border-slate-200 hover:bg-slate-50'"
                                @click="chooseCountry('BE')" :aria-pressed="selectedCountry === 'BE'">
                                <span>🇧🇪 <strong>Belgium:</strong> BE</span>
                            </button>
                            <button type="button"
                                class="block w-full text-left rounded-md border border-transparent px-3 py-2 transition focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500"
                                :class="selectedCountry === 'NL' ? 'border-slate-300 bg-slate-100 text-slate-900 shadow-sm' : 'hover:border-slate-200 hover:bg-slate-50'"
                                @click="chooseCountry('NL')" :aria-pressed="selectedCountry === 'NL'">
                                <span>🇳🇱 <strong>Netherlands:</strong> NL</span>
                            </button>
                            <button type="button"
                                class="block w-full text-left rounded-md border border-transparent px-3 py-2 transition focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500"
                                :class="selectedCountry === 'PL' ? 'border-slate-300 bg-slate-100 text-slate-900 shadow-sm' : 'hover:border-slate-200 hover:bg-slate-50'"
                                @click="chooseCountry('PL')" :aria-pressed="selectedCountry === 'PL'">
                                <span>🇵🇱 <strong>Poland:</strong> PL</span>
                            </button>
                        </div>
                    </div>
                    <div>
                        <h5 class="font-medium text-slate-700 mb-2">Eastern &amp; Southern</h5>
                        <div class="space-y-1 text-slate-700">
                            <button type="button"
                                class="block w-full text-left rounded-md border border-transparent px-3 py-2 transition focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500"
                                :class="selectedCountry === 'EE' ? 'border-slate-300 bg-slate-100 text-slate-900 shadow-sm' : 'hover:border-slate-200 hover:bg-slate-50'"
                                @click="chooseCountry('EE')" :aria-pressed="selectedCountry === 'EE'">
                                <span>🇪🇪 <strong>Estonia:</strong> EE</span>
                            </button>
                            <button type="button"
                                class="block w-full text-left rounded-md border border-transparent px-3 py-2 transition focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500"
                                :class="selectedCountry === 'LT' ? 'border-slate-300 bg-slate-100 text-slate-900 shadow-sm' : 'hover:border-slate-200 hover:bg-slate-50'"
                                @click="chooseCountry('LT')" :aria-pressed="selectedCountry === 'LT'">
                                <span>🇱🇹 <strong>Lithuania:</strong> LT</span>
                            </button>
                            <button type="button"
                                class="block w-full text-left rounded-md border border-transparent px-3 py-2 transition focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500"
                                :class="selectedCountry === 'LV' ? 'border-slate-300 bg-slate-100 text-slate-900 shadow-sm' : 'hover:border-slate-200 hover:bg-slate-50'"
                                @click="chooseCountry('LV')" :aria-pressed="selectedCountry === 'LV'">
                                <span>🇱🇻 <strong>Latvia:</strong> LV</span>
                            </button>
                            <button type="button"
                                class="block w-full text-left rounded-md border border-transparent px-3 py-2 transition focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500"
                                :class="selectedCountry === 'IT' ? 'border-slate-300 bg-slate-100 text-slate-900 shadow-sm' : 'hover:border-slate-200 hover:bg-slate-50'"
                                @click="chooseCountry('IT')" :aria-pressed="selectedCountry === 'IT'">
                                <span>🇮🇹 <strong>Italy:</strong> IT-NORTH, IT-CENTRE_NORTH, IT-CENTRE_SOUTH, IT-SOUTH,
                                    IT-SICILY, IT-SARDINIA, IT-CALABRIA</span>
                            </button>
                            <button type="button"
                                class="block w-full text-left rounded-md border border-transparent px-3 py-2 transition focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500"
                                :class="selectedCountry === 'ES' ? 'border-slate-300 bg-slate-100 text-slate-900 shadow-sm' : 'hover:border-slate-200 hover:bg-slate-50'"
                                @click="chooseCountry('ES')" :aria-pressed="selectedCountry === 'ES'">
                                <span>🇪🇸 <strong>Spain:</strong> ES</span>
                            </button>
                            <button type="button"
                                class="block w-full text-left rounded-md border border-transparent px-3 py-2 transition focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500"
                                :class="selectedCountry === 'PT' ? 'border-slate-300 bg-slate-100 text-slate-900 shadow-sm' : 'hover:border-slate-200 hover:bg-slate-50'"
                                @click="chooseCountry('PT')" :aria-pressed="selectedCountry === 'PT'">
                                <span>🇵🇹 <strong>Portugal:</strong> PT</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="text-center my-4">
            <a href="/explorer/"
                class="inline-flex items-center justify-center rounded-full py-3 px-6 text-sm font-semibold bg-slate-900 text-white hover:bg-slate-700 touch-manipulation min-h-[44px]">
                Explore historical prices →
            </a>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', () => {
                if (window.hljs?.highlightAll) {
                    window.hljs.highlightAll();
                }
            });
        </script>

        <script>
            function priceExplorer() {
                const DEFAULT_COUNTRIES = window.SPOT_COUNTRIES || [
                    { code: 'SE', name: 'Sweden', zones: ['SE1', 'SE2', 'SE3', 'SE4'] },
                    { code: 'DK', name: 'Denmark', zones: ['DK1', 'DK2'] },
                    { code: 'NO', name: 'Norway', zones: ['NO1', 'NO2', 'NO3', 'NO4', 'NO5'] },
                    { code: 'FI', name: 'Finland', zones: ['FI'] },
                    { code: 'DE', name: 'Germany', zones: ['DE_LU'] },
                    { code: 'AT', name: 'Austria', zones: ['AT'] },
                    { code: 'FR', name: 'France', zones: ['FR'] },
                    { code: 'BE', name: 'Belgium', zones: ['BE'] },
                    { code: 'NL', name: 'Netherlands', zones: ['NL'] },
                    { code: 'PL', name: 'Poland', zones: ['PL'] },
                    { code: 'EE', name: 'Estonia', zones: ['EE'] },
                    { code: 'LT', name: 'Lithuania', zones: ['LT'] },
                    { code: 'LV', name: 'Latvia', zones: ['LV'] },
                    { code: 'IT', name: 'Italy', zones: ['IT-NORTH', 'IT-CENTRE_NORTH', 'IT-CENTRE_SOUTH', 'IT-SOUTH', 'IT-SICILY', 'IT-SARDINIA', 'IT-CALABRIA'] },
                    { code: 'CH', name: 'Switzerland', zones: ['CH'] },
                    { code: 'ES', name: 'Spain', zones: ['ES'] },
                    { code: 'PT', name: 'Portugal', zones: ['PT'] },
                    { code: 'SK', name: 'Slovakia', zones: ['SK'] },
                    { code: 'SI', name: 'Slovenia', zones: ['SI'] },
                    { code: 'CZ', name: 'Czech Republic', zones: ['CZ'] },
                    { code: 'HU', name: 'Hungary', zones: ['HU'] },
                    { code: 'HR', name: 'Croatia', zones: ['HR'] },
                    { code: 'RO', name: 'Romania', zones: ['RO'] },
                    { code: 'RS', name: 'Serbia', zones: ['RS'] },
                    { code: 'BG', name: 'Bulgaria', zones: ['BG'] },
                    { code: 'GR', name: 'Greece', zones: ['GR'] },

                ];
                const storage = window.SPOT_STORAGE || {};
                const decodeFallback = raw => {
                    if (raw == null || raw === '') return null;
                    try {
                        return JSON.parse(raw);
                    } catch (_) {
                        return raw;
                    }
                };
                const readStoredValue = storage.readStoredValue || ((key, legacyKeys = []) => {
                    const read = candidate => {
                        try {
                            return decodeFallback(localStorage.getItem(candidate));
                        } catch (_) {
                            return null;
                        }
                    };
                    const primary = read(key);
                    if (primary !== null && primary !== undefined && primary !== '') return primary;
                    for (const legacy of legacyKeys) {
                        const legacyValue = read(legacy);
                        if (legacyValue !== null && legacyValue !== undefined && legacyValue !== '') {
                            return legacyValue;
                        }
                    }
                    return null;
                });
                const writeStoredValue = storage.writeStoredValue || ((key, value, legacyKeys = []) => {
                    try {
                        if (value === null || value === undefined || value === '') {
                            localStorage.removeItem(key);
                            legacyKeys.forEach(candidate => localStorage.removeItem(candidate));
                        } else {
                            localStorage.setItem(key, JSON.stringify(value));
                            legacyKeys.forEach(candidate => localStorage.removeItem(candidate));
                        }
                    } catch (_) {
                        // ignore storage failures
                    }
                });
                const STORAGE_KEYS = storage.STORAGE_KEYS || {
                    country: 'spot.settings.country',
                    zone: 'spot.settings.zone',
                    timezone: 'spot.settings.timezone'
                };
                const LEGACY_KEYS = storage.LEGACY_KEYS || {
                    country: 'spot.country',
                    zone: 'spot.zone',
                    timezone: 'spot.timezone'
                };
                const activeCountries = (Array.isArray(window.SPOT_COUNTRIES) && window.SPOT_COUNTRIES.length
                    ? window.SPOT_COUNTRIES
                    : DEFAULT_COUNTRIES);
                const zoneOwners = storage.zoneOwners || {};
                const zoneOptions = (Array.isArray(storage.zoneOptions) && storage.zoneOptions.length
                    ? storage.zoneOptions
                    : activeCountries.flatMap(country => {
                        const zones = Array.isArray(country.zones) ? country.zones : [];
                        return zones.map(zone => ({ code: zone, country: country.code, label: `${zone} · ${country.name}` }));
                    }));
                const countryExists = code => activeCountries.some(c => c.code === code);
                const findCountryForZone = zone => {
                    if (!zone) return null;
                    if (zoneOwners && typeof zoneOwners === 'object' && zoneOwners[zone]) {
                        return zoneOwners[zone];
                    }
                    const owner = activeCountries.find(c => Array.isArray(c.zones) && c.zones.includes(zone));
                    return owner ? owner.code : null;
                };
                const firstZoneForCountry = code => {
                    const country = activeCountries.find(c => c.code === code);
                    if (!country || !Array.isArray(country.zones) || !country.zones.length) return null;
                    return country.zones[0];
                };
                const firstAvailableZone = () => (zoneOptions.length ? zoneOptions[0].code : null);
                return {
                    countries: activeCountries,
                    country: 'SE',
                    zone: null,
                    timezone: 'UTC',
                    chart: null,
                    renderRequestId: 0,
                    refreshHandle: null,
                    refreshIntervalMs: 15 * 60 * 1000,
                    get currentCountry() { return this.countries.find(c => c.code === this.country); },
                    get currentCountryName() { return this.currentCountry?.name || '—'; },
                    init() {
                        const fallbackCountry = this.countries[0]?.code || null;
                        const savedCountry = readStoredValue(STORAGE_KEYS.country, [LEGACY_KEYS.country]);
                        if (typeof savedCountry === 'string' && countryExists(savedCountry)) {
                            this.country = savedCountry;
                        } else {
                            const locale = (navigator.language || navigator.userLanguage || '').toUpperCase();
                            const match = this.countries.find(c => locale.includes(c.code));
                            if (match) this.country = match.code;
                        }
                        if (!countryExists(this.country)) {
                            this.country = fallbackCountry || this.country;
                        }

                        const storedZone = readStoredValue(STORAGE_KEYS.zone, [LEGACY_KEYS.zone]);
                        const storedZoneOwner = typeof storedZone === 'string' ? findCountryForZone(storedZone) : null;
                        if (storedZoneOwner) {
                            this.zone = storedZone;
                        }
                        if (!this.zone) {
                            const fallbackZone = firstZoneForCountry(this.country) || firstAvailableZone();
                            this.zone = fallbackZone;
                        }
                        if (!countryExists(this.country)) {
                            if (fallbackCountry) {
                                this.country = fallbackCountry;
                            }
                        }
                        if (!this.zone) {
                            this.zone = firstAvailableZone();
                        }

                        if (this.country) {
                            writeStoredValue(STORAGE_KEYS.country, this.country, [LEGACY_KEYS.country]);
                        }
                        if (this.zone) {
                            writeStoredValue(STORAGE_KEYS.zone, this.zone, [LEGACY_KEYS.zone]);
                        } else {
                            writeStoredValue(STORAGE_KEYS.zone, null, [LEGACY_KEYS.zone]);
                        }

                        const storedTz = readStoredValue(STORAGE_KEYS.timezone, [LEGACY_KEYS.timezone]);
                        if (typeof storedTz === 'string' && storedTz) {
                            this.timezone = storedTz;
                        } else {
                            try {
                                const inferredTz = Intl.DateTimeFormat().resolvedOptions().timeZone;
                                if (inferredTz) this.timezone = inferredTz;
                            } catch (_) {
                                this.timezone = 'UTC';
                            }
                        }
                        if (this.timezone) {
                            writeStoredValue(STORAGE_KEYS.timezone, this.timezone, [LEGACY_KEYS.timezone]);
                        }

                        document.addEventListener('spot:selection-change', (event) => {
                            const detail = event?.detail || {};
                            if (detail.source === 'price-explorer') return;
                            let needsRender = false;
                            if (detail.country && detail.country !== this.country && countryExists(detail.country)) {
                                this.country = detail.country;
                                writeStoredValue(STORAGE_KEYS.country, this.country, [LEGACY_KEYS.country]);
                                needsRender = true;
                            }
                            if (detail.zone !== undefined && detail.zone !== this.zone) {
                                if (detail.zone === null || findCountryForZone(detail.zone)) {
                                    this.zone = detail.zone;
                                    writeStoredValue(STORAGE_KEYS.zone, this.zone, [LEGACY_KEYS.zone]);
                                    needsRender = true;
                                }
                            }
                            if (needsRender) {
                                this.$nextTick(() => {
                                    this.renderAllZones();
                                    this.startAutoRefresh();
                                });
                            }
                        });
                        document.addEventListener('spot:timezone-change', (event) => {
                            const nextTz = event?.detail?.timezone;
                            if (nextTz && nextTz !== this.timezone) {
                                this.timezone = nextTz;
                                writeStoredValue(STORAGE_KEYS.timezone, this.timezone, [LEGACY_KEYS.timezone]);
                                this.$nextTick(() => {
                                    this.renderAllZones();
                                    this.startAutoRefresh();
                                });
                            }
                        });

                        document.addEventListener('visibilitychange', () => {
                            if (document.visibilityState === undefined || document.visibilityState === 'visible') {
                                this.renderAllZones();
                            }
                        });
                        if (typeof window !== 'undefined' && window.matchMedia) {
                            this.screenQuery = window.matchMedia('(max-width: 639px)');
                            const handleScreenChange = () => {
                                this.renderAllZones();
                            };
                            if (typeof this.screenQuery.addEventListener === 'function') {
                                this.screenQuery.addEventListener('change', handleScreenChange);
                            } else if (typeof this.screenQuery.addListener === 'function') {
                                this.screenQuery.addListener(handleScreenChange);
                            }
                            window.addEventListener('beforeunload', () => {
                                if (this.screenQuery) {
                                    if (typeof this.screenQuery.removeEventListener === 'function') {
                                        this.screenQuery.removeEventListener('change', handleScreenChange);
                                    } else if (typeof this.screenQuery.removeListener === 'function') {
                                        this.screenQuery.removeListener(handleScreenChange);
                                    }
                                }
                            }, { once: true });
                        }
                        window.addEventListener('beforeunload', () => this.stopAutoRefresh(), { once: true });

                        this.$nextTick(() => {
                            this.renderAllZones();
                            this.startAutoRefresh();
                        });

                        document.dispatchEvent(new CustomEvent('spot:selection-change', {
                            detail: { country: this.country, zone: this.zone, timezone: this.timezone, reason: 'init-sync', source: 'price-explorer' }
                        }));
                        document.dispatchEvent(new CustomEvent('spot:timezone-change', {
                            detail: { timezone: this.timezone, reason: 'init-sync', source: 'price-explorer' }
                        }));
                    },
                    startAutoRefresh() {
                        this.stopAutoRefresh();
                        if (!Number.isFinite(this.refreshIntervalMs) || this.refreshIntervalMs <= 0) return;
                        this.refreshHandle = setInterval(() => {
                            if (document.visibilityState && document.visibilityState !== 'visible') return;
                            this.renderAllZones();
                        }, this.refreshIntervalMs);
                    },
                    stopAutoRefresh() {
                        if (this.refreshHandle) {
                            clearInterval(this.refreshHandle);
                            this.refreshHandle = null;
                        }
                    },
                    destroyChart() {
                        if (this._resizeObs) {
                            try { this._resizeObs.disconnect(); } catch (_) { }
                            this._resizeObs = null;
                        }
                        if (this.chart) {
                            try { this.chart.destroy(); } catch (_) { }
                            this.chart = null;
                        }
                    },
                    buildOptsAll(getWidth, getHeight, seriesDefs) {
                        const tz = this.timezone || 'UTC';
                        const toLocalDate = (epochSeconds) => {
                            const utcDate = new Date(epochSeconds * 1000);
                            try {
                                const localeString = utcDate.toLocaleString('en-US', { timeZone: tz });
                                return new Date(localeString);
                            } catch (_) {
                                return utcDate;
                            }
                        };
                        const formatTimestamp = (epochSeconds) => {
                            const utcDate = new Date(epochSeconds * 1000);
                            return utcDate.toLocaleString('en-GB', {
                                timeZone: tz,
                                year: 'numeric',
                                month: 'short',
                                day: '2-digit',
                                hour: '2-digit',
                                minute: '2-digit',
                                hour12: false,
                                timeZoneName: 'short'
                            });
                        };
                        const isSmallScreen = this.screenQuery ? this.screenQuery.matches
                            : (typeof window !== 'undefined' ? window.innerWidth < 640 : false);
                        const chartPadding = isSmallScreen ? [12, 8, 16, 8] : [20, 16, 28, 28];
                        return {
                            title: null,
                            width: getWidth(),
                            height: getHeight(),
                            legend: { show: false },
                            padding: chartPadding,
                            series: [
                                {},
                                ...seriesDefs.map(s => ({
                                    label: s.label,
                                    stroke: s.color,
                                    width: 2,
                                    paths: uPlot.paths.stepped({ align: -1 })
                                }))
                            ],
                            axes: [
                                {
                                    label: isSmallScreen ? null : `Time (${tz})`,
                                    values: (u, vals) => {
                                        let lastDay = null;
                                        return vals.map(v => {
                                            const local = toLocalDate(v);
                                            const day = local.getDate();
                                            const isMidnight = local.getHours() === 0 && local.getMinutes() === 0;
                                            let out;
                                            if (lastDay === null || day !== lastDay || isMidnight) {
                                                out = local.toLocaleDateString('en-GB', { month: 'short', day: '2-digit' });
                                            } else {
                                                out = local.toLocaleTimeString('en-GB', { hour: '2-digit', minute: '2-digit', hour12: false });
                                            }
                                            lastDay = day;
                                            return out;
                                        });
                                    },
                                    grid: { show: true },
                                    space: isSmallScreen ? 36 : 56,
                                    gap: isSmallScreen ? 4 : 6
                                },
                                {
                                    label: isSmallScreen ? null : "Price (€/MWh)",
                                    grid: { show: true },
                                    space: isSmallScreen ? 56 : 72
                                }
                            ],
                            scales: { x: { time: true } },
                            cursor: { show: true, x: true, y: true, points: { show: false } },
                            hooks: {
                                init: [
                                    (u) => {
                                        const tt = document.createElement('div');
                                        tt.id = 'uplot-tooltip-all';
                                        tt.className = 'absolute z-10 rounded-md bg-slate-900/90 text-white text-xs px-2 py-1 shadow-lg pointer-events-none hidden';
                                        tt.style.transform = 'translate(12px, -24px)';
                                        u.over.appendChild(tt);
                                        u._ttAll = tt;
                                        u._formatTimestamp = formatTimestamp;
                                        u.over.addEventListener('mouseleave', () => tt.classList.add('hidden'));
                                        // persist series defs for color/labels in tooltip
                                        u._seriesDefs = seriesDefs;
                                    }
                                ],
                                setCursor: [
                                    (u) => {
                                        const tt = u._ttAll;
                                        if (!tt) return;
                                        const { left, top, idx } = u.cursor;
                                        if (left == null || top == null || idx == null || left < 0 || top < 0 || left > u.bbox.width || top > u.bbox.height) {
                                            tt.classList.add('hidden');
                                            return;
                                        }

                                        const xArr = u.data[0];
                                        const i = Math.max(0, Math.min(idx, xArr.length - 1));
                                        const xVal = xArr[i];
                                        const formatter = u._formatTimestamp || ((value) => {
                                            const fallback = new Date(value * 1000);
                                            return fallback.toLocaleString('en-GB', {
                                                year: 'numeric',
                                                month: 'short',
                                                day: '2-digit',
                                                hour: '2-digit',
                                                minute: '2-digit',
                                                hour12: false
                                            });
                                        });
                                        const timeStr = formatter(xVal);

                                        let html = `${timeStr}`;
                                        for (let s = 1; s < u.data.length; s++) {
                                            const val = u.data[s][i];
                                            const def = u._seriesDefs ? u._seriesDefs[s - 1] : null;
                                            const label = def?.label || `S${s}`;
                                            const color = def?.color || '#999';
                                            const valStr = val == null ? '—' : `${val.toFixed(2)} €/MWh`;
                                            html += `<br><span style="display:inline-block;width:10px;height:10px;background:${color};border-radius:2px;margin-right:6px"></span>${label}: <span class=\"font-semibold\">${valStr}</span>`;
                                        }

                                        tt.innerHTML = html;
                                        tt.style.left = `${left}px`;
                                        tt.style.top = `${top}px`;
                                        tt.classList.remove('hidden');
                                    }
                                ]
                            }
                        };
                    },
                    async renderAllZones() {
                        const el = document.getElementById('priceChartAll');
                        if (!el) return;

                        this.renderRequestId += 1;
                        const requestId = this.renderRequestId;

                        const country = this.currentCountry;
                        if (!country) {
                            this.destroyChart();
                            el.innerHTML = '<p class="text-center text-slate-500 text-sm">Choose a country to load prices.</p>';
                            return;
                        }

                        const allZones = Array.isArray(country.zones) ? country.zones : [];
                        const preferredZone = (this.zone && allZones.includes(this.zone)) ? this.zone : null;
                        const zones = preferredZone
                            ? [preferredZone, ...allZones.filter(z => z !== preferredZone)]
                            : allZones.slice();

                        if (!zones.length) {
                            this.destroyChart();
                            el.innerHTML = '<p class="text-center text-slate-500 text-sm">No bidding zones available for this country yet.</p>';
                            return;
                        }

                        if (!this.chart) {
                            el.innerHTML = '<p class="text-center text-slate-500 text-sm">Loading latest data…</p>';
                        }

                        const getWidth = () => el.getBoundingClientRect().width;
                        const getHeight = () => el.getBoundingClientRect().height;
                        const colors = ['#059669', '#2563eb', '#f59e0b', '#dc2626', '#7c3aed', '#0ea5e9', '#16a34a'];
                        const timerLabel = 'renderAllZones';
                        const canTime = typeof console !== 'undefined' && typeof console.time === 'function';
                        if (canTime) {
                            console.time(timerLabel);
                        }

                        try {
                            const responses = await Promise.all(
                                zones.map(async (z) => {
                                    const res = await fetch(`/electricity/${z}/latest/index.json`, { cache: 'no-store' });
                                    if (!res.ok) {
                                        throw new Error(`Failed to load ${z} (${res.status})`);
                                    }
                                    return res.json();
                                })
                            );

                            if (requestId !== this.renderRequestId) return;

                            const tsSet = new Set();
                            responses.forEach(arr => arr.forEach(it => tsSet.add(Math.floor(new Date(it.timestamp).getTime() / 1000))));
                            const xTimes = Array.from(tsSet).sort((a, b) => a - b);

                            if (!xTimes.length) {
                                this.destroyChart();
                                el.innerHTML = '<p class="text-center text-slate-500 text-sm">No recently published data for this country yet.</p>';
                                return;
                            }

                            const seriesY = responses.map(arr => {
                                const m = new Map(arr.map(it => [Math.floor(new Date(it.timestamp).getTime() / 1000), parseFloat(it.value)]));
                                return xTimes.map(t => (m.has(t) ? m.get(t) : null));
                            });

                            const seriesDefs = zones.map((z, i) => ({ label: z, color: colors[i % colors.length] }));
                            const opts = this.buildOptsAll(getWidth, getHeight, seriesDefs);

                            this.destroyChart();
                            el.innerHTML = '';
                            this.chart = new uPlot(opts, [xTimes, ...seriesY], el);

                            if (typeof ResizeObserver === 'function') {
                                this._resizeObs = new ResizeObserver(() => {
                                    if (this.chart) {
                                        this.chart.setSize({ width: getWidth(), height: getHeight() });
                                    }
                                });
                                this._resizeObs.observe(el);
                            } else {
                                this._resizeObs = null;
                            }

                            const perSeriesCounts = seriesY.map(a => a.reduce((acc, v) => acc + (v == null ? 0 : 1), 0));
                            const totalPoints = perSeriesCounts.reduce((a, b) => a + b, 0);
                            if (typeof console !== 'undefined' && typeof console.log === 'function') {
                                console.log('renderAllZones datapoints:', {
                                    xLen: xTimes.length,
                                    perSeries: zones.map((z, i) => ({ zone: z, points: perSeriesCounts[i] })),
                                    total: totalPoints,
                                });
                            }
                        } catch (e) {
                            if (requestId !== this.renderRequestId) return;
                            this.destroyChart();
                            el.innerHTML = '<p class="text-center text-rose-600 text-sm">Error loading price data. Please try again.</p>';
                            if (typeof console !== 'undefined' && typeof console.error === 'function') {
                                console.error('all-zones', e);
                            }
                        } finally {
                            if (canTime && typeof console.timeEnd === 'function') {
                                try { console.timeEnd(timerLabel); } catch (_) { }
                            }
                        }
                    }
                };
            }

            document.addEventListener('DOMContentLoaded', () => { });
        </script>
    </main>

    <footer class="bg-slate-50 mt-16">
        <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
            <div class="py-16 text-center text-sm text-slate-600">

                <p>
                    Utilitarian Spot is a free, fast and reliable energy price backend for load control and demand
                    response automation. <br>
                    It provides day-ahead and historical energy price data, with simple charts for visualization when
                    needed.
                </p>
                <br>
                <p class="my-2">
                    Source data is reused from the
                    <a href="https://transparency.entsoe.eu" class="text-slate-900 font-semibold hover:text-slate-700"
                        target="_blank" rel="noopener noreferrer">
                        ENTSO-E Transparency Platform
                    </a>
                    under the terms of CC BY 4.0.
                </p>
                <p class="my-2">Prices are in €/MWh. Timestamps default to UTC unless you change the preference in
                    settings.</p>
            </div>
            <div
                class="flex flex-col items-center border-t border-slate-400/10 py-10 gap-6 sm:flex-row sm:items-center sm:justify-between">
                <p class="text-sm text-slate-600 text-center sm:text-left">
                    Free service from <a class="text-slate-800 hover:text-slate-900 underline underline-offset-2"
                        href="https://utilitarian.io">utilitarian.io</a>
                </p>
                <img class="h-5 w-auto" width="142" height="20"
                    src="https://github.com/u9n/spot/actions/workflows/get_latest_electricity_prices.yml/badge.svg"
                    alt="GitHub Actions status for latest price updates" />
                <a class="group" aria-label="Utilitarian on GitHub" href="https://github.com/u9n/">
                    <svg aria-hidden="true" class="h-6 w-6 fill-slate-500 group-hover:fill-slate-700">
                        <path
                            d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0 1 12 6.844a9.59 9.59 0 0 1 2.504.337c1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.02 10.02 0 0 0 22 12.017C22 6.484 17.522 2 12 2Z">
                        </path>
                    </svg>
                </a>
            </div>
        </div>
    </footer>
    <div class="bg-slate-900 text-slate-300 text-xs py-6">
        <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 text-center leading-relaxed">
            Disclaimer: data is collected from ENTSO-E and provided on a best-effort basis without guarantees of
            accuracy, completeness, or availability. Utilitarian Spot offers no service-level agreement and accepts no
            liability for losses or damages resulting from use of the data or service interruptions.
        </div>
    </div>
    <div id="spot-settings-panel" x-cloak x-show="open" class="fixed inset-0 z-50">
        <div id="spot-settings-backdrop" class="absolute inset-0 bg-slate-900/60" @click="closePanel()"
            x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0"
            x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0"></div>
        <aside id="spot-settings-menu"
            class="absolute right-0 top-0 h-full w-full max-w-xs sm:max-w-sm bg-slate-900 text-slate-100 shadow-2xl flex flex-col transform"
            x-transition:enter="transition transform ease-out duration-500 sm:duration-700"
            x-transition:enter-start="translate-x-full" x-transition:enter-end="translate-x-0"
            x-transition:leave="transition transform ease-in duration-500 sm:duration-700"
            x-transition:leave-start="translate-x-0" x-transition:leave-end="translate-x-full" @click.stop>
            <div class="flex items-center justify-between border-b border-white/10 px-5 py-4">
                <div>
                    <p class="text-xs uppercase tracking-wide text-slate-400">App Settings</p>
                    <h2 class="text-lg font-semibold">Personalise Spot</h2>
                </div>
                <button id="spot-settings-close" type="button"
                    class="rounded-md bg-white/10 p-1 text-slate-200 hover:bg-white/20 focus:outline-none focus-visible:ring-2 focus-visible:ring-white"
                    aria-label="Close settings" @click="closePanel()">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="h-5 w-5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto px-5 py-6 space-y-6 text-sm">
                <section class="space-y-4">
                    <div class="space-y-2">
                        <h3 class="text-sm font-semibold text-slate-100">Preferred country</h3>
                        <p class="text-xs text-slate-400">Used for charts and default bidding zone suggestions.</p>
                        <label for="spot-settings-country" class="sr-only">Preferred country</label>
                        <select id="spot-settings-country" data-alpine-managed="true" x-model="selectedCountry"
                            class="w-full rounded-md border border-white/10 bg-slate-800 px-3 py-2 text-sm focus:outline-none focus:ring focus:ring-slate-500">
                            <template x-for="country in countries" :key="country.code">
                                <option :value="country.code" :selected="country.code === selectedCountry"
                                    x-text="`${country.name} (${country.code})`"></option>
                            </template>
                        </select>
                    </div>
                    <div class="space-y-2">
                        <h3 class="text-sm font-semibold text-slate-100">Preferred timezone</h3>
                        <p class="text-xs text-slate-400">Choose how timestamps are shown across Spot.</p>
                        <label for="spot-settings-timezone" class="sr-only">Preferred timezone</label>
                        <select id="spot-settings-timezone" data-alpine-managed="true" x-model="selectedTimezone"
                            class="w-full rounded-md border border-white/10 bg-slate-800 px-3 py-2 text-sm focus:outline-none focus:ring focus:ring-slate-500">
                            <template x-for="tz in timezoneList" :key="tz">
                                <option :value="tz" x-text="formatTimezone(tz)"></option>
                            </template>
                        </select>
                    </div>
                </section>
                <div class="flex items-start gap-3 rounded-lg border border-white/10 bg-slate-800 px-4 py-3">
                    <input id="spot-notify-toggle" type="checkbox"
                        class="mt-1 h-4 w-4 rounded border-slate-400 bg-slate-900 text-emerald-500 focus:ring-emerald-400" />
                    <div>
                        <label for="spot-notify-toggle" class="text-sm font-medium text-slate-100">Enable price update
                            notifications</label>
                        <p class="text-xs text-slate-400">Choose which bidding zone should trigger alerts. This setting
                            does not affect the preferred country above.</p>
                        <div class="mt-3 space-y-2">
                            <label for="spot-notify-zone" class="text-xs uppercase tracking-wide text-slate-400">Bidding
                                zone</label>
                            <select id="spot-notify-zone" data-alpine-managed="true" x-model="notificationZone"
                                class="w-full rounded-md border border-white/10 bg-slate-800 px-3 py-2 text-sm focus:outline-none focus:ring focus:ring-slate-500">
                                <template x-for="option in zoneOptions" :key="option.code">
                                    <option :value="option.code" x-text="option.label || option.code"></option>
                                </template>
                            </select>
                        </div>

                        <span class="flex mt-4"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                stroke-width="1.5" stroke="currentColor" class="size-6 mr-2">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" />
                            </svg>
                            We are currently developing this feature. Stay tuned! </span>


                    </div>
                </div>
                <p id="spot-settings-note" class="text-xs text-amber-300 hidden"></p>
            </div>
        </aside>
    </div>
    <script defer src="/app.js"></script>
</body>

</html>
